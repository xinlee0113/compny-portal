# 开发流程说明

## 概述

本文档描述了公司门户网站项目的标准开发流程，包括从需求分析到代码提交的完整过程。

## 完整开发流程

### 1. 文档分析

在开始编码之前，首先需要仔细阅读和分析相关文档：

- 产品需求文档 (PRD)
- 系统架构文档
- 部署架构文档
- 用户体验设计规范
- 用户界面设计规范

### 2. 编码实现 (MVP)

基于文档分析结果，实现最小可行产品 (MVP)：

1. 创建必要的文件和目录结构
2. 实现核心功能代码
3. 遵循项目技术栈要求
4. 使用MVC模式组织代码
5. 遵循代码规范和最佳实践

### 3. 测试

#### 3.1 单元测试

- 使用Jest测试框架
- 覆盖核心业务逻辑
- 确保测试覆盖率至少达到80%

#### 3.2 集成测试

- 测试API接口
- 测试数据库操作
- 测试页面渲染

#### 3.3 运行测试

```bash
# 运行所有测试
npm test

# 运行测试并生成覆盖率报告
npm run test:coverage

# 监听模式运行测试
npm run test:watch
```

### 4. 代码质量检查

```bash
# 运行代码检查
npm run lint

# 自动修复代码格式问题
npm run lint:fix
```

### 5. 代码提交

#### 5.1 提交规范

遵循Angular Commit Message规范：

```
<type>(<scope>): <subject>

<body>

<footer>
```

详细规范请参考：[Git提交规范](GitCommitGuidelines.md)

#### 5.2 提交步骤

1. 添加变更文件到暂存区
2. 编写符合规范的提交信息
3. 提交代码

```bash
# 添加所有变更
git add .

# 使用模板提交
git commit -t .gitmessage

# 或者直接提交
git commit -m "feat(homepage): implement company introduction page"
```

### 6. 流水线验证

项目配置了GitHub Actions CI/CD流水线，每次推送代码都会自动触发：

- 依赖安装
- 代码检查
- 运行测试
- 构建项目
- 构建Docker镜像

可以通过GitHub仓库的Actions页面查看流水线执行状态。

### 7. 反馈完成情况

每次任务完成后，需要提供以下信息：

- 已完成的功能列表
- 代码质量和测试覆盖率
- 部署状态
- 遇到的问题和解决方案

### 8. 下一步计划

根据当前进度提出下一步建议：

- 待开发的功能
- 需要优化的部分
- 可能的风险和解决方案

## 自动化工具

### Git Hooks

项目使用Husky配置了Git Hooks，在提交代码时会自动运行：

- 代码检查
- 测试运行

### 提交模板

可以使用以下命令使用提交模板：

```bash
git commit -t .gitmessage
```

## 最佳实践

1. **小步提交**：每次提交只包含一个功能或修复
2. **频繁提交**：每天至少提交一次代码
3. **测试驱动**：先写测试，再写实现代码
4. **代码审查**：所有代码变更都需要经过审查
5. **持续集成**：确保所有测试在提交前通过

## 常见问题

### 1. 提交被拒绝怎么办？

如果提交信息不符合规范，提交会被拒绝。请检查提交信息是否符合[Git提交规范](GitCommitGuidelines.md)。

### 2. 测试失败怎么办？

确保所有测试都通过后再提交代码。可以使用以下命令调试测试：

```bash
npm run test:watch
```

### 3. 代码检查失败怎么办？

运行以下命令查看和修复代码问题：

```bash
# 查看问题
npm run lint

# 自动修复
npm run lint:fix
```